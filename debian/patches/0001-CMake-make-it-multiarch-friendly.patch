From 8242d6204658c3837b0ba9b840b76dc70cb29639 Mon Sep 17 00:00:00 2001
From: Ricardo Salveti <ricardo.salveti@linaro.org>
Date: Mon, 16 Nov 2015 23:29:49 -0200
Subject: [PATCH] CMake: make it multiarch friendly

Signed-off-by: Ricardo Salveti <ricardo.salveti@linaro.org>
---
 CMakeLists.txt     | 7 +++++++
 src/CMakeLists.txt | 4 +---
 2 files changed, 8 insertions(+), 3 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index c329535..8114a17 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -12,6 +12,13 @@ if(${CMAKE_SYSTEM_NAME} MATCHES "Darwin")
     link_directories(/opt/X11/lib)
 endif()
 
+set(BIN_INSTALL_DIR bin)
+set(LIB_INSTALL_DIR lib/${CMAKE_LIBRARY_ARCHITECTURE})
+
+set(INSTALL_TARGETS_DEFAULT_ARGS RUNTIME DESTINATION "${BIN_INSTALL_DIR}"
+                                 LIBRARY DESTINATION "${LIB_INSTALL_DIR}"
+                                 ARCHIVE DESTINATION "${LIB_INSTALL_DIR}")
+
 link_directories(${CMAKE_BINARY_DIR}/lib)
 add_definitions(-O2)
 include(flags.cmake)
diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index 3867a9c..bd73204 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -38,7 +38,5 @@ if(${CMAKE_SYSTEM_NAME} MATCHES "Linux")
 endif()
 
 INSTALL(TARGETS GL
-    RUNTIME DESTINATION bin
-    LIBRARY DESTINATION lib
-    ARCHIVE DESTINATION lib
+    ${INSTALL_TARGETS_DEFAULT_ARGS}
 )
-- 
2.5.0

